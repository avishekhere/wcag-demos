<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WCAG 2.1 – 3.3.3 Demo</title>
<style>
  body { font-family: Arial, sans-serif; background: #f7f7fb; color: #111; margin: 0; padding: 0; }
  .wrap { max-width: 800px; margin: 30px auto; padding: 20px; background: #fff; border-radius: 12px; box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
  h1 { font-size: 24px; margin-top: 0; }
  h2 { font-size: 20px; margin-bottom: 10px; }
  label { display: block; margin-top: 12px; }
  input { padding: 6px; border-radius: 6px; border: 1px solid #ccc; width: 100%; margin-top: 4px; }
  button { margin-top: 12px; padding: 8px 12px; border-radius: 6px; border: 1px solid #007bff; background: #007bff; color: #fff; cursor: pointer; }
  .result { margin-top: 10px; font-weight: 600; }
  .result.pass { color: #0b7a2a; }
  .result.fail { color: #b70f0f; }
  .note { font-size: 13px; color: #666; margin-top: 4px; }
</style>
</head>
<body>
<div class="wrap">
  <h1>WCAG 2.1 – 3.3.3: Clear Error Guidance with Corrective Suggestions</h1>
  <label for="demo-mode"><strong>Choose Demo Mode:</strong></label>
  <select id="demo-mode">
    <option value="unsafe">Unsafe / Fail</option>
    <option value="safe">Safe / Pass</option>
  </select>

  <section class="example" id="example-form">
    <h2>Job Application Form Demo</h2>
    <form id="jobForm">
      <label for="email">Email:</label>
      <input type="text" id="email" name="email" placeholder="user@example.com">

      <label for="dob">Date of Birth (DD-MM-YYYY):</label>
      <input type="text" id="dob" name="dob" placeholder="DD-MM-YYYY">

      <label for="password">Password (Sensitive):</label>
      <input type="password" id="password" name="password" placeholder="Enter password">

      <button type="submit">Submit</button>
      <div id="form-result" class="result"></div>
    </form>
    <p class="note">Test by entering invalid email, incorrect date format, or leaving fields empty.</p>
  </section>
</div>

<script>
const demoMode = document.getElementById('demo-mode');
const jobForm = document.getElementById('jobForm');
const emailInput = document.getElementById('email');
const dobInput = document.getElementById('dob');
const passwordInput = document.getElementById('password');
const formResult = document.getElementById('form-result');

function setDemoMode(mode) {
  jobForm.onsubmit = (e) => {
    e.preventDefault();
    formResult.textContent = '';
    formResult.className = 'result';

    const email = emailInput.value.trim();
    const dob = dobInput.value.trim();
    const password = passwordInput.value.trim();
    let hasError = false;

    if(mode === 'unsafe') {
      // FAIL: only generic error message
      formResult.textContent = '⚠️ Error!';
      formResult.className = 'result fail';
      return;
    }

    // PASS: detailed error guidance with corrective suggestions
    let messages = [];
    // Email validation
    if(!email) {
      messages.push('Please enter your email address (e.g., user@example.com)');
      hasError = true;
    } else if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      messages.push('Enter a valid email address (e.g., user@example.com)');
      hasError = true;
    }
    // DOB validation
    if(!dob) {
      messages.push('Please enter your date of birth in DD-MM-YYYY format');
      hasError = true;
    } else if(!/^\d{2}-\d{2}-\d{4}$/.test(dob)) {
      messages.push('Please enter your date of birth in DD-MM-YYYY format (e.g., 31-12-1975)');
      hasError = true;
    }
    // Password (sensitive)
    if(!password) {
      messages.push('Password cannot be empty');
      hasError = true;
    }

    if(hasError) {
      formResult.innerHTML = messages.map(msg => `<div role="alert">${msg}</div>`).join('');
      formResult.className = 'result fail';
    } else {
      formResult.textContent = '✅ All inputs are valid!';
      formResult.className = 'result pass';
    }
  };
}

// Initialize demo mode
demoMode.addEventListener('change', () => setDemoMode(demoMode.value));
demoMode.dispatchEvent(new Event('change'));
</script>
</body>
</html>
