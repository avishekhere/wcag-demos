<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WCAG 2.1 – 3.3.1 Demo: Clear Error Message Alerts</title>
<style>
  body { font-family: Arial, sans-serif; line-height:1.6; margin:0; padding:0; background:#f7f7fb; color:#111;}
  .wrap { max-width:900px; margin:30px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 6px 16px rgba(0,0,0,0.08);}
  h1 { margin-top:0; font-size:24px; }
  p { margin-bottom:12px; }
  label, input, button { display:block; margin:8px 0; }
  input { padding:6px 10px; border-radius:6px; border:1px solid #ccc; width:50%; }
  button { padding:8px 12px; border-radius:6px; border:1px solid #ccc; cursor:pointer; }
  .error { color:red; font-size:14px; margin-top:2px; }
  .success { color:green; font-weight:600; margin-top:8px; }
  .note { font-size:13px; color:#666; margin-top:6px; }
</style>
</head>
<body>
<div class="wrap">
  <h1>WCAG 2.1 – 3.3.1: Clear Error Message Alerts Demo</h1>

  <label for="error-mode"><strong>Choose Demo Mode:</strong></label>
  <select id="error-mode">
    <option value="unsafe">Unsafe / Fail (errors not accessible)</option>
    <option value="safe">Safe / Pass (errors accessible)</option>
  </select>
  <p class="note">Switch modes to see inaccessible vs accessible error handling.</p>

  <form id="demoForm" novalidate>
    <!-- Name -->
    <label for="name">Name (required):</label>
    <input type="text" id="name" name="name" aria-describedby="name-error">
    <div id="name-error" class="error"></div>

    <!-- Email -->
    <label for="email">Email (required, must be valid):</label>
    <input type="email" id="email" name="email" aria-describedby="email-error">
    <div id="email-error" class="error"></div>

    <!-- Mobile Number -->
    <label for="mobile">Mobile Number (10 digits):</label>
    <input type="text" id="mobile" name="mobile" aria-describedby="mobile-error">
    <div id="mobile-error" class="error"></div>

    <!-- PIN Code -->
    <label for="pincode">PIN Code (6 digits):</label>
    <input type="text" id="pincode" name="pincode" aria-describedby="pincode-error">
    <div id="pincode-error" class="error"></div>

    <button type="submit">Submit Form</button>
  </form>

  <div id="form-success" class="success"></div>
</div>

<script>
const form = document.getElementById('demoForm');
const modeSelect = document.getElementById('error-mode');
const nameInput = document.getElementById('name');
const emailInput = document.getElementById('email');
const mobileInput = document.getElementById('mobile');
const pincodeInput = document.getElementById('pincode');

const nameError = document.getElementById('name-error');
const emailError = document.getElementById('email-error');
const mobileError = document.getElementById('mobile-error');
const pincodeError = document.getElementById('pincode-error');

const formSuccess = document.getElementById('form-success');

let currentMode = 'unsafe';

function validateForm(e) {
  e.preventDefault();
  // Clear previous messages
  nameError.textContent = '';
  emailError.textContent = '';
  mobileError.textContent = '';
  pincodeError.textContent = '';
  formSuccess.textContent = '';

  let hasError = false;

  if(currentMode === 'unsafe') {
    // Unsafe: highlight fields only (simulate color-only errors)
    if(nameInput.value.trim() === '') nameInput.style.border = '2px solid red', hasError = true;
    if(emailInput.value.trim() === '' || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) emailInput.style.border = '2px solid red', hasError = true;
    if(!/^\d{10}$/.test(mobileInput.value)) mobileInput.style.border = '2px solid red', hasError = true;
    if(!/^\d{6}$/.test(pincodeInput.value)) pincodeInput.style.border = '2px solid red', hasError = true;

    if(!hasError) {
      formSuccess.textContent = 'Form submitted! (unsafe)';
    }
  } else {
    // Safe: text + ARIA alerts
    nameInput.style.border = '1px solid #ccc';
    emailInput.style.border = '1px solid #ccc';
    mobileInput.style.border = '1px solid #ccc';
    pincodeInput.style.border = '1px solid #ccc';

    if(nameInput.value.trim() === '') { 
      nameError.textContent = 'Name field cannot be empty.'; hasError = true; 
      nameError.setAttribute('role','alert'); nameError.setAttribute('aria-live','polite');
    }
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if(emailInput.value.trim() === '') { 
      emailError.textContent = 'Email field cannot be empty.'; hasError = true; 
      emailError.setAttribute('role','alert'); emailError.setAttribute('aria-live','polite');
    } else if(!emailRegex.test(emailInput.value.trim())) { 
      emailError.textContent = 'Please enter a valid email address.'; hasError = true; 
      emailError.setAttribute('role','alert'); emailError.setAttribute('aria-live','polite');
    }

    if(!/^\d{10}$/.test(mobileInput.value)) { 
      mobileError.textContent = 'Please enter a valid 10-digit mobile number.'; hasError = true;
      mobileError.setAttribute('role','alert'); mobileError.setAttribute('aria-live','polite');
    }

    if(!/^\d{6}$/.test(pincodeInput.value)) { 
      pincodeError.textContent = 'Enter a valid 6-digit PIN code.'; hasError = true;
      pincodeError.setAttribute('role','alert'); pincodeError.setAttribute('aria-live','polite');
    }

    if(!hasError) {
      formSuccess.textContent = 'Form submitted successfully! ✅';
    }
  }
}

// Attach event listeners
form.addEventListener('submit', validateForm);

modeSelect.addEventListener('change', () => {
  currentMode = modeSelect.value;
  // Reset all fields/styles
  nameError.textContent = '';
  emailError.textContent = '';
  mobileError.textContent = '';
  pincodeError.textContent = '';
  formSuccess.textContent = '';
  nameInput.style.border = '1px solid #ccc';
  emailInput.style.border = '1px solid #ccc';
  mobileInput.style.border = '1px solid #ccc';
  pincodeInput.style.border = '1px solid #ccc';
});
</script>
</body>
</html>
